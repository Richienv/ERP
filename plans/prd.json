{
  "branchName": "fix/meeting-19feb-bugs",
  "features": [
    {
      "id": "T-001",
      "title": "BUG-004: Fix inventory dashboard data mismatch",
      "priority": "high",
      "passes": false,
      "acceptance_criteria": [
        "Dashboard KPIs (total products, low stock count, total value) match actual product table data",
        "Stock level numbers on dashboard match sum of stock levels across all warehouses for each product",
        "Status indicators (OK, RESTOCK_NEEDED, CRITICAL, OUT_OF_STOCK) correctly reflect actual stock vs minStock/reorderLevel/safetyStock",
        "Material Gap Analysis kanban cards match the computed gap from inventory-logic.ts",
        "No new test failures, no new TypeScript errors"
      ],
      "notes": "Root cause likely in getInventoryKPIs() or getMaterialGapAnalysis() in app/actions/inventory.ts. Compare computed values against raw DB data. Check if calculateProductStatus in lib/inventory-logic.ts matches dashboard logic."
    },
    {
      "id": "T-002",
      "title": "BUG-005: Fix inventory dashboard action buttons",
      "priority": "high",
      "passes": false,
      "acceptance_criteria": [
        "All action buttons at bottom of inventory dashboard product section trigger correct operations",
        "Restock button creates PR and refreshes procurement + inventory dashboards",
        "Alert toggle (manualAlert) updates product and refreshes dashboard",
        "Quick view popover Update/Delete buttons work and refresh connected data",
        "All mutations invalidate correct query keys per ralph-loop-audit-results.csv",
        "No new test failures"
      ],
      "notes": "Check components/inventory/inventory-kanban-board.tsx, components/inventory/product-quick-view.tsx, and components/inventory/purchase-request-dialog.tsx for action handler wiring."
    },
    {
      "id": "T-003",
      "title": "FEAT-001: Extend vendor form with missing fields",
      "priority": "medium",
      "passes": false,
      "acceptance_criteria": [
        "Vendor form has: contact title (Bpk/Ibu dropdown), address2 (secondary), office phone, PIC phone (separate fields), payment terms (TOP dropdown: CASH, DP, NET_15, NET_30, NET_45, NET_60, NET_90, COD)",
        "New fields saved to DB via Prisma schema update (add columns to Supplier model)",
        "Vendor card displays new fields where appropriate (payment terms badge, both phone numbers)",
        "Edit vendor dialog pre-fills all fields",
        "No new test failures, no new TypeScript errors"
      ],
      "notes": "Add contactTitle, address2, officePhone, picPhone, paymentTerm to Supplier model in prisma/schema.prisma. Use PaymentTerm enum already defined in schema. Update app/actions/vendor.ts createVendor/getVendors. Update components/procurement/new-vendor-dialog.tsx form. Update vendors-view.tsx cards."
    },
    {
      "id": "T-004",
      "title": "FEAT-002: Add vendor deactivate/reactivate button",
      "priority": "medium",
      "passes": false,
      "acceptance_criteria": [
        "Each vendor card has a toggle/button to deactivate (set isActive=false) or reactivate (set isActive=true)",
        "Deactivated vendors show visual indication (greyed out, 'Nonaktif' badge)",
        "Confirmation dialog before deactivating ('Yakin nonaktifkan vendor ini?')",
        "After toggle, vendor list refreshes via queryClient.invalidateQueries",
        "Deactivated vendors still visible when filter is set to 'Nonaktif' or 'Semua'",
        "No new test failures"
      ],
      "notes": "Add toggleVendorStatus server action to app/actions/vendor.ts. Add toggle button to components/procurement/vendor-actions.tsx. Wire up with TanStack Query invalidation."
    },
    {
      "id": "T-005",
      "title": "FEAT-003: Vendor duplicate detection with fuzzy matching",
      "priority": "medium",
      "passes": false,
      "acceptance_criteria": [
        "When typing vendor name in create form, system checks for exact match (case-insensitive) and shows warning",
        "System also checks for similar names (Levenshtein distance <= 2) and shows 'Mungkin duplikat' warning with list of similar vendors",
        "Warning is non-blocking — user can dismiss and proceed",
        "Check runs on blur or after 500ms debounce of name input",
        "No new test failures"
      ],
      "notes": "Implement fuzzy check as a server action checkDuplicateVendor(name) in app/actions/vendor.ts. Use simple Levenshtein or trigram matching. Add warning UI below the name field in new-vendor-dialog.tsx."
    },
    {
      "id": "T-006",
      "title": "FEAT-004: Complete inline entity creation across all forms",
      "priority": "medium",
      "passes": false,
      "acceptance_criteria": [
        "PO form: supplier/vendor selector has '+ Tambah Vendor Baru' inline create option",
        "Product form: category, brand, unit, color selectors have inline create (already done for category — verify others)",
        "Quotation form: customer selector has '+ Tambah Pelanggan Baru' inline create",
        "Sales order form: customer selector has inline create",
        "All inline creates use ComboboxWithCreate pattern with onCreate callback",
        "After inline create, new entity is auto-selected in the form field",
        "Related caches invalidated after inline create",
        "No new test failures"
      ],
      "notes": "Pattern already established in components/inventory/material-input-form.tsx for supplier. Extend to: components/procurement/new-po-dialog.tsx (vendor), components/sales/quotation-form.tsx (customer), components/sales/sales-order-form.tsx (customer). Check which selectors already use ComboboxWithCreate vs plain Select."
    },
    {
      "id": "T-007",
      "title": "FEAT-005: Incomplete data warning badges on entity cards",
      "priority": "low",
      "passes": false,
      "acceptance_criteria": [
        "Vendor cards show orange 'Data Belum Lengkap' warning badge if missing: phone AND email AND address",
        "Product cards show warning badge if missing: costPrice or category",
        "Customer cards show warning badge if missing: phone AND email AND address",
        "Warning badge links to edit form on click",
        "Warnings visible on respective list pages",
        "No new test failures"
      ],
      "notes": "Add isIncomplete computed property to vendor/product/customer data mappers. Render conditional badge in card components. Keep it simple — just check for null/empty required fields."
    },
    {
      "id": "T-008",
      "title": "BUG-006: Complete TanStack Query caching rollout to all pages",
      "priority": "medium",
      "passes": false,
      "acceptance_criteria": [
        "All pages use TanStack Query useQuery hooks (no useEffect+fetch+useState pattern remaining)",
        "All pages have entries in hooks/use-nav-prefetch.ts routePrefetchMap for sidebar hover prefetch",
        "All pages have appropriate skeleton loading states via page-skeleton components",
        "All pages load within 1-2 seconds on subsequent navigation (cache hit)",
        "No new test failures"
      ],
      "notes": "Audit all page.tsx files for remaining useEffect+fetch patterns. Convert to useQuery hooks following hooks/use-products-query.ts pattern. Add to routePrefetchMap in hooks/use-nav-prefetch.ts. Reference: MEMORY.md 0s Instant Loading standard."
    },
    {
      "id": "T-009",
      "title": "BUG-008: Mobile web view optimization for key pages",
      "priority": "low",
      "passes": false,
      "acceptance_criteria": [
        "Vendor list: cards stack vertically, text not truncated on important fields",
        "Inventory dashboard: KPI strip wraps to 2 rows on mobile, kanban scrollable horizontally",
        "All forms: inputs full-width on mobile, touch targets >= 44px",
        "Tables: horizontal scroll with sticky first column on mobile",
        "Navigation: sidebar collapses to hamburger menu on mobile (already implemented — verify)",
        "No new test failures"
      ],
      "notes": "Focus on the 5 most-used pages: /inventory, /procurement/vendors, /sales, /procurement, /dashboard. Use Tailwind responsive prefixes (sm:, md:). Check existing responsive classes in globals.css mf-page."
    },
    {
      "id": "T-010",
      "title": "FEAT-006: Subcontract module review prep",
      "priority": "low",
      "passes": false,
      "skip": true,
      "skipReason": "Requires human (Darren) to test against real-world subcontracting workflow and provide feedback",
      "acceptance_criteria": [
        "Subcontract module pages all load without errors",
        "Basic CRUD operations work (create order, update status, view registry)",
        "Data refresh works after mutations"
      ],
      "notes": "This task is blocked on human review. Darren will test the subcontract module and provide feedback on missing features/bugs."
    }
  ]
}
